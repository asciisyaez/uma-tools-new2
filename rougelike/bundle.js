(()=>{var B,M,ft,Kt,L,ht,dt,pt,vt,tt,et,_t,Ot,q={},mt=[],Xt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,W=Array.isArray;function H(e,_){for(var n in _)e[n]=_[n];return e}function nt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function m(e,_,n){var r,o,l,u={};for(l in _)l=="key"?r=_[l]:l=="ref"?o=_[l]:u[l]=_[l];if(arguments.length>2&&(u.children=arguments.length>3?B.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(l in e.defaultProps)u[l]===void 0&&(u[l]=e.defaultProps[l]);return G(e,u,r,o,null)}function G(e,_,n,r,o){var l={type:e,props:_,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++ft,__i:-1,__u:0};return o==null&&M.vnode!=null&&M.vnode(l),l}function F(e){return e.children}function z(e,_){this.props=e,this.context=_}function $(e,_){if(_==null)return e.__?$(e.__,e.__i+1):null;for(var n;_<e.__k.length;_++)if((n=e.__k[_])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?$(e):null}function gt(e){var _,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,_=0;_<e.__k.length;_++)if((n=e.__k[_])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return gt(e)}}function yt(e){(!e.__d&&(e.__d=!0)&&L.push(e)&&!K.__r++||ht!=M.debounceRendering)&&((ht=M.debounceRendering)||dt)(K)}function K(){for(var e,_,n,r,o,l,u,a=1;L.length;)L.length>a&&L.sort(pt),e=L.shift(),a=L.length,e.__d&&(n=void 0,o=(r=(_=e).__v).__e,l=[],u=[],_.__P&&((n=H({},r)).__v=r.__v+1,M.vnode&&M.vnode(n),rt(_.__P,n,r,_.__n,_.__P.namespaceURI,32&r.__u?[o]:null,l,o??$(r),!!(32&r.__u),u),n.__v=r.__v,n.__.__k[n.__i]=n,St(l,n,u),n.__e!=o&&gt(n)));K.__r=0}function bt(e,_,n,r,o,l,u,a,f,c,p){var i,h,d,y,w,k,b=r&&r.__k||mt,g=_.length;for(f=Jt(n,_,b,f,g),i=0;i<g;i++)(d=n.__k[i])!=null&&(h=d.__i==-1?q:b[d.__i]||q,d.__i=i,k=rt(e,d,h,o,l,u,a,f,c,p),y=d.__e,d.ref&&h.ref!=d.ref&&(h.ref&&ot(h.ref,null,d),p.push(d.ref,d.__c||y,d)),w==null&&y!=null&&(w=y),4&d.__u||h.__k===d.__k?f=kt(d,f,e):typeof d.type=="function"&&k!==void 0?f=k:y&&(f=y.nextSibling),d.__u&=-7);return n.__e=w,f}function Jt(e,_,n,r,o){var l,u,a,f,c,p=n.length,i=p,h=0;for(e.__k=new Array(o),l=0;l<o;l++)(u=_[l])!=null&&typeof u!="boolean"&&typeof u!="function"?(f=l+h,(u=e.__k[l]=typeof u=="string"||typeof u=="number"||typeof u=="bigint"||u.constructor==String?G(null,u,null,null,null):W(u)?G(F,{children:u},null,null,null):u.constructor==null&&u.__b>0?G(u.type,u.props,u.key,u.ref?u.ref:null,u.__v):u).__=e,u.__b=e.__b+1,a=null,(c=u.__i=Vt(u,n,f,i))!=-1&&(i--,(a=n[c])&&(a.__u|=2)),a==null||a.__v==null?(c==-1&&(o>p?h--:o<p&&h++),typeof u.type!="function"&&(u.__u|=4)):c!=f&&(c==f-1?h--:c==f+1?h++:(c>f?h--:h++,u.__u|=4))):e.__k[l]=null;if(i)for(l=0;l<p;l++)(a=n[l])!=null&&!(2&a.__u)&&(a.__e==r&&(r=$(a)),xt(a,a));return r}function kt(e,_,n){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,_=kt(r[o],_,n));return _}e.__e!=_&&(_&&e.type&&!n.contains(_)&&(_=$(e)),n.insertBefore(e.__e,_||null),_=e.__e);do _=_&&_.nextSibling;while(_!=null&&_.nodeType==8);return _}function Vt(e,_,n,r){var o,l,u=e.key,a=e.type,f=_[n];if(f===null&&e.key==null||f&&u==f.key&&a==f.type&&!(2&f.__u))return n;if(r>(f!=null&&!(2&f.__u)?1:0))for(o=n-1,l=n+1;o>=0||l<_.length;){if(o>=0){if((f=_[o])&&!(2&f.__u)&&u==f.key&&a==f.type)return o;o--}if(l<_.length){if((f=_[l])&&!(2&f.__u)&&u==f.key&&a==f.type)return l;l++}}return-1}function wt(e,_,n){_[0]=="-"?e.setProperty(_,n??""):e[_]=n==null?"":typeof n!="number"||Xt.test(_)?n:n+"px"}function O(e,_,n,r,o){var l,u;t:if(_=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(_ in r)n&&_ in n||wt(e.style,_,"");if(n)for(_ in n)r&&n[_]==r[_]||wt(e.style,_,n[_])}else if(_[0]=="o"&&_[1]=="n")l=_!=(_=_.replace(vt,"$1")),u=_.toLowerCase(),_=u in e||_=="onFocusOut"||_=="onFocusIn"?u.slice(2):_.slice(2),e.l||(e.l={}),e.l[_+l]=n,n?r?n.u=r.u:(n.u=tt,e.addEventListener(_,l?_t:et,l)):e.removeEventListener(_,l?_t:et,l);else{if(o=="http://www.w3.org/2000/svg")_=_.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(_!="width"&&_!="height"&&_!="href"&&_!="list"&&_!="form"&&_!="tabIndex"&&_!="download"&&_!="rowSpan"&&_!="colSpan"&&_!="role"&&_!="popover"&&_ in e)try{e[_]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&_[4]!="-"?e.removeAttribute(_):e.setAttribute(_,_=="popover"&&n==1?"":n))}}function Mt(e){return function(_){if(this.l){var n=this.l[_.type+e];if(_.t==null)_.t=tt++;else if(_.t<n.u)return;return n(M.event?M.event(_):_)}}}function rt(e,_,n,r,o,l,u,a,f,c){var p,i,h,d,y,w,k,b,g,x,N,A,T,Z,R,D,j,P=_.type;if(_.constructor!=null)return null;128&n.__u&&(f=!!(32&n.__u),l=[a=_.__e=n.__e]),(p=M.__b)&&p(_);t:if(typeof P=="function")try{if(b=_.props,g="prototype"in P&&P.prototype.render,x=(p=P.contextType)&&r[p.__c],N=p?x?x.props.value:p.__:r,n.__c?k=(i=_.__c=n.__c).__=i.__E:(g?_.__c=i=new P(b,N):(_.__c=i=new z(b,N),i.constructor=P,i.render=Qt),x&&x.sub(i),i.props=b,i.state||(i.state={}),i.context=N,i.__n=r,h=i.__d=!0,i.__h=[],i._sb=[]),g&&i.__s==null&&(i.__s=i.state),g&&P.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=H({},i.__s)),H(i.__s,P.getDerivedStateFromProps(b,i.__s))),d=i.props,y=i.state,i.__v=_,h)g&&P.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),g&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(g&&P.getDerivedStateFromProps==null&&b!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(b,N),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(b,i.__s,N)===!1||_.__v==n.__v){for(_.__v!=n.__v&&(i.props=b,i.state=i.__s,i.__d=!1),_.__e=n.__e,_.__k=n.__k,_.__k.some(function(U){U&&(U.__=_)}),A=0;A<i._sb.length;A++)i.__h.push(i._sb[A]);i._sb=[],i.__h.length&&u.push(i);break t}i.componentWillUpdate!=null&&i.componentWillUpdate(b,i.__s,N),g&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,y,w)})}if(i.context=N,i.props=b,i.__P=e,i.__e=!1,T=M.__r,Z=0,g){for(i.state=i.__s,i.__d=!1,T&&T(_),p=i.render(i.props,i.state,i.context),R=0;R<i._sb.length;R++)i.__h.push(i._sb[R]);i._sb=[]}else do i.__d=!1,T&&T(_),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++Z<25);i.state=i.__s,i.getChildContext!=null&&(r=H(H({},r),i.getChildContext())),g&&!h&&i.getSnapshotBeforeUpdate!=null&&(w=i.getSnapshotBeforeUpdate(d,y)),D=p,p!=null&&p.type===F&&p.key==null&&(D=Ct(p.props.children)),a=bt(e,W(D)?D:[D],_,n,r,o,l,u,a,f,c),i.base=_.__e,_.__u&=-161,i.__h.length&&u.push(i),k&&(i.__E=i.__=null)}catch(U){if(_.__v=null,f||l!=null)if(U.then){for(_.__u|=f?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;l[l.indexOf(a)]=null,_.__e=a}else for(j=l.length;j--;)nt(l[j]);else _.__e=n.__e,_.__k=n.__k;M.__e(U,_,n)}else l==null&&_.__v==n.__v?(_.__k=n.__k,_.__e=n.__e):a=_.__e=Yt(n.__e,_,n,r,o,l,u,f,c);return(p=M.diffed)&&p(_),128&_.__u?void 0:a}function St(e,_,n){for(var r=0;r<n.length;r++)ot(n[r],n[++r],n[++r]);M.__c&&M.__c(_,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(l){l.call(o)})}catch(l){M.__e(l,o.__v)}})}function Ct(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:W(e)?e.map(Ct):H({},e)}function Yt(e,_,n,r,o,l,u,a,f){var c,p,i,h,d,y,w,k=n.props,b=_.props,g=_.type;if(g=="svg"?o="http://www.w3.org/2000/svg":g=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),l!=null){for(c=0;c<l.length;c++)if((d=l[c])&&"setAttribute"in d==!!g&&(g?d.localName==g:d.nodeType==3)){e=d,l[c]=null;break}}if(e==null){if(g==null)return document.createTextNode(b);e=document.createElementNS(o,g,b.is&&b),a&&(M.__m&&M.__m(_,l),a=!1),l=null}if(g==null)k===b||a&&e.data==b||(e.data=b);else{if(l=l&&B.call(e.childNodes),k=n.props||q,!a&&l!=null)for(k={},c=0;c<e.attributes.length;c++)k[(d=e.attributes[c]).name]=d.value;for(c in k)if(d=k[c],c!="children"){if(c=="dangerouslySetInnerHTML")i=d;else if(!(c in b)){if(c=="value"&&"defaultValue"in b||c=="checked"&&"defaultChecked"in b)continue;O(e,c,null,d,o)}}for(c in b)d=b[c],c=="children"?h=d:c=="dangerouslySetInnerHTML"?p=d:c=="value"?y=d:c=="checked"?w=d:a&&typeof d!="function"||k[c]===d||O(e,c,d,k[c],o);if(p)a||i&&(p.__html==i.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),_.__k=[];else if(i&&(e.innerHTML=""),bt(_.type=="template"?e.content:e,W(h)?h:[h],_,n,r,g=="foreignObject"?"http://www.w3.org/1999/xhtml":o,l,u,l?l[0]:n.__k&&$(n,0),a,f),l!=null)for(c=l.length;c--;)nt(l[c]);a||(c="value",g=="progress"&&y==null?e.removeAttribute("value"):y!=null&&(y!==e[c]||g=="progress"&&!y||g=="option"&&y!=k[c])&&O(e,c,y,k[c],o),c="checked",w!=null&&w!=e[c]&&O(e,c,w,k[c],o))}return e}function ot(e,_,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&_==null||(e.__u=e(_))}else e.current=_}catch(o){M.__e(o,n)}}function xt(e,_,n){var r,o;if(M.unmount&&M.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||ot(r,null,_)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(l){M.__e(l,_)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&xt(r[o],_,n||typeof e.type!="function");n||nt(e.__e),e.__c=e.__=e.__e=void 0}function Qt(e,_,n){return this.constructor(e,n)}function Zt(e,_,n){var r,o,l,u;_==document&&(_=document.documentElement),M.__&&M.__(e,_),o=(r=typeof n=="function")?null:n&&n.__k||_.__k,l=[],u=[],rt(_,e=(!r&&n||_).__k=m(F,null,[e]),o||q,q,_.namespaceURI,!r&&n?[n]:o?null:_.firstChild?B.call(_.childNodes):null,l,!r&&n?n:o?o.__e:_.firstChild,r,u),St(l,e,u)}B=mt.slice,M={__e:function(e,_,n,r){for(var o,l,u;_=_.__;)if((o=_.__c)&&!o.__)try{if((l=o.constructor)&&l.getDerivedStateFromError!=null&&(o.setState(l.getDerivedStateFromError(e)),u=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),u=o.__d),u)return o.__E=o}catch(a){e=a}throw e}},ft=0,Kt=function(e){return e!=null&&e.constructor==null},z.prototype.setState=function(e,_){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=H({},this.state),typeof e=="function"&&(e=e(H({},n),this.props)),e&&H(n,e),e!=null&&this.__v&&(_&&this._sb.push(_),yt(this))},z.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),yt(this))},z.prototype.render=F,L=[],dt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,pt=function(e,_){return e.__v.__b-_.__v.__b},K.__r=0,vt=/(PointerCapture)$|Capture$/i,tt=0,et=Mt(!1),_t=Mt(!0),Ot=0;var X,S,lt,Pt,it=0,Nt=[],C=M,It=C.__b,Ht=C.__r,Tt=C.diffed,At=C.__c,Lt=C.unmount,Et=C.__;function Dt(e,_){C.__h&&C.__h(S,e,it||_),it=0;var n=S.__H||(S.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function E(e){return it=1,te($t,e)}function te(e,_,n){var r=Dt(X++,2);if(r.t=e,!r.__c&&(r.__=[n?n(_):$t(void 0,_),function(a){var f=r.__N?r.__N[0]:r.__[0],c=r.t(f,a);f!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=S,!S.__f)){var o=function(a,f,c){if(!r.__c.__H)return!0;var p=r.__c.__H.__.filter(function(h){return!!h.__c});if(p.every(function(h){return!h.__N}))return!l||l.call(this,a,f,c);var i=r.__c.props!==a;return p.forEach(function(h){if(h.__N){var d=h.__[0];h.__=h.__N,h.__N=void 0,d!==h.__[0]&&(i=!0)}}),l&&l.call(this,a,f,c)||i};S.__f=!0;var l=S.shouldComponentUpdate,u=S.componentWillUpdate;S.componentWillUpdate=function(a,f,c){if(this.__e){var p=l;l=void 0,o(a,f,c),l=p}u&&u.call(this,a,f,c)},S.shouldComponentUpdate=o}return r.__N||r.__}function Ut(e,_){var n=Dt(X++,3);!C.__s&&ne(n.__H,_)&&(n.__=e,n.u=_,S.__H.__h.push(n))}function ee(){for(var e;e=Nt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(J),e.__H.__h.forEach(ut),e.__H.__h=[]}catch(_){e.__H.__h=[],C.__e(_,e.__v)}}C.__b=function(e){S=null,It&&It(e)},C.__=function(e,_){e&&_.__k&&_.__k.__m&&(e.__m=_.__k.__m),Et&&Et(e,_)},C.__r=function(e){Ht&&Ht(e),X=0;var _=(S=e.__c).__H;_&&(lt===S?(_.__h=[],S.__h=[],_.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(_.__h.forEach(J),_.__h.forEach(ut),_.__h=[],X=0)),lt=S},C.diffed=function(e){Tt&&Tt(e);var _=e.__c;_&&_.__H&&(_.__H.__h.length&&(Nt.push(_)!==1&&Pt===C.requestAnimationFrame||((Pt=C.requestAnimationFrame)||_e)(ee)),_.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),lt=S=null},C.__c=function(e,_){_.some(function(n){try{n.__h.forEach(J),n.__h=n.__h.filter(function(r){return!r.__||ut(r)})}catch(r){_.some(function(o){o.__h&&(o.__h=[])}),_=[],C.__e(r,n.__v)}}),At&&At(e,_)},C.unmount=function(e){Lt&&Lt(e);var _,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{J(r)}catch(o){_=o}}),n.__H=void 0,_&&C.__e(_,n.__v))};var Ft=typeof requestAnimationFrame=="function";function _e(e){var _,n=function(){clearTimeout(r),Ft&&cancelAnimationFrame(_),setTimeout(e)},r=setTimeout(n,35);Ft&&(_=requestAnimationFrame(n))}function J(e){var _=S,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),S=_}function ut(e){var _=S;e.__c=e.__(),S=_}function ne(e,_){return!e||e.length!==_.length||_.some(function(n,r){return n!==e[r]})}function $t(e,_){return typeof _=="function"?_(e):_}var re=function(){function e(_){this._value=NaN,typeof _=="string"?this._seed=this.hashCode(_):typeof _=="number"?this._seed=this.getSafeSeed(_):this._seed=this.getSafeSeed(e.MIN+Math.floor((e.MAX-e.MIN)*Math.random())),this.reset()}return e.prototype.next=function(_,n){return _===void 0&&(_=0),n===void 0&&(n=1),this.recalculate(),this.map(this._value,e.MIN,e.MAX,_,n)},e.prototype.nextInt=function(_,n){return _===void 0&&(_=10),n===void 0&&(n=100),this.recalculate(),Math.floor(this.map(this._value,e.MIN,e.MAX,_,n+1))},e.prototype.nextString=function(_,n){_===void 0&&(_=16),n===void 0&&(n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");for(var r="";r.length<_;)r+=this.nextChar(n);return r},e.prototype.nextChar=function(_){return _===void 0&&(_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"),_.substr(this.nextInt(0,_.length-1),1)},e.prototype.nextArrayItem=function(_){return _[this.nextInt(0,_.length-1)]},e.prototype.nextBoolean=function(){return this.recalculate(),this._value>.5},e.prototype.skip=function(_){for(_===void 0&&(_=1);_-- >0;)this.recalculate()},e.prototype.reset=function(){this._value=this._seed},e.prototype.recalculate=function(){this._value=this.xorshift(this._value)},e.prototype.xorshift=function(_){return _^=_<<13,_^=_>>17,_^=_<<5,_},e.prototype.map=function(_,n,r,o,l){return(_-n)/(r-n)*(l-o)+o},e.prototype.hashCode=function(_){var n=0;if(_)for(var r=_.length,o=0;o<r;o++)n=(n<<5)-n+_.charCodeAt(o),n|=0,n=this.xorshift(n);return this.getSafeSeed(n)},e.prototype.getSafeSeed=function(_){return _===0?1:_},e.MIN=-2147483648,e.MAX=2147483647,e}(),oe=re,le=class{constructor(e){this.prando=new oe(e)}int32(){return Math.floor(this.prando.next()*4294967296)}random(){return this.prando.next()}uniform(e){return this.prando.nextInt(0,e-1)}},ie=le;function st(e){return .0031308>=e?12.92*e:1.055*Math.pow(e,.4166666666666667)-.055}function at(e){return .04045<e?Math.pow((e+.055)/1.055,2.4):e/12.92}function ue(e,_,n){let r=.4122214708*e+.5363325363*_+.0514459929*n,o=.2119034982*e+.6806995451*_+.1073969566*n,l=.0883024619*e+.2817188376*_+.6299787005*n,u=Math.cbrt(r),a=Math.cbrt(o),f=Math.cbrt(l);return[.2104542553*u+.793617785*a-.0040720468*f,1.9779984951*u-2.428592205*a+.4505937099*f,.0259040371*u+.7827717662*a-.808675766*f]}function V(e,_,n){let r=e+.3963377774*_+.2158037573*n,o=e-.1055613458*_-.0638541728*n,l=e-.0894841775*_-1.291485548*n,u=r*r*r,a=o*o*o,f=l*l*l;return[4.0767416621*u-3.3077115913*a+.2309699292*f,-1.2684380046*u+2.6097574011*a-.3413193965*f,-.0041960863*u-.7034186147*a+1.707614701*f]}function Rt(e){const r=1.170873786407767;return .5*(r*e-.206+Math.sqrt((r*e-.206)*(r*e-.206)+4*.03*r*e))}function ct(e){return(e*e+.206*e)/(1.170873786407767*(e+.03))}function se(e,_){let n,r,o,l,u,a,f,c;-1.88170328*e-.80936493*_>1?(n=1.19086277,r=1.76576728,o=.59662641,l=.75515197,u=.56771245,a=4.0767416621,f=-3.3077115913,c=.2309699292):1.81444104*e-1.19445276*_>1?(n=.73956515,r=-.45954404,o=.08285427,l=.1254107,u=.14503204,a=-1.2684380046,f=2.6097574011,c=-.3413193965):(n=1.35733652,r=-.00915799,o=-1.1513021,l=-.50559606,u=.00692167,a=-.0041960863,f=-.7034186147,c=1.707614701);let p=n+r*e+o*_+l*e*e+u*e*_,i=.3963377774*e+.2158037573*_,h=-.1055613458*e-.0638541728*_,d=-.0894841775*e-1.291485548*_;{let y=1+p*i,w=1+p*h,k=1+p*d,b=y*y*y,g=w*w*w,x=k*k*k,N=3*i*y*y,A=3*h*w*w,T=3*d*k*k,Z=6*i*i*y,R=6*h*h*w,D=6*d*d*k,j=a*b+f*g+c*x,P=a*N+f*A+c*T,U=a*Z+f*R+c*D;p=p-j*P/(P*P-.5*j*U)}return p}function ae(e,_){let n=se(e,_),r=V(1,n*e,n*_),o=Math.cbrt(1/Math.max(Math.max(r[0],r[1]),r[2])),l=o*n;return[o,l]}function jt(e,_,n=null){n||(n=ae(e,_));let r=n[0],o=n[1];return[o/r,o/(1-r)]}function ce(e,_,n){let r=Math.cos(2*Math.PI*e),o=Math.sin(2*Math.PI*e),l=jt(r,o),u=l[0],a=.5,f=l[1],c=1-a/u,p=1-_*a/(a+f-f*c*_),i=_*f*a/(a+f-f*c*_),h=n*p,d=n*i,y=ct(p),w=i*y/p,k=ct(h);d=d*k/h,h=k;let b=V(y,r*w,o*w),g=Math.cbrt(1/Math.max(b[0],b[1],b[2],0));h=h*g,d=d*g;let x=V(h,d*r,d*o);return[255*st(x[0]),255*st(x[1]),255*st(x[2])]}function fe(e,_,n){let r=ue(at(e/255),at(_/255),at(n/255)),o=Math.sqrt(r[1]*r[1]+r[2]*r[2]),l=r[1]/o,u=r[2]/o,a=r[0],f=.5+.5*Math.atan2(-r[2],-r[1])/Math.PI,c=jt(l,u),p=c[0],i=.5,h=c[1],d=1-i/p;t=h/(o+a*h);let y=t*a,w=t*o;return L_vt=ct(y),C_vt=w*L_vt/y,rgb_scale=V(L_vt,l*C_vt,u*C_vt),scale_L=Math.cbrt(1/Math.max(rgb_scale[0],rgb_scale[1],rgb_scale[2],0)),a=a/scale_L,o=o/scale_L,o=o*Rt(a)/a,a=Rt(a),v=a/y,s=(i+h)*w/(h*i+h*d*w),[f,s,v]}var qt=7;function he(e){return m("div",{style:e.color?`background:rgb(${e.color.join(",")})`:""})}function I(e){return m("div",{class:`square ${e.status} ${e.focused?"focused":""}`},isNaN(e.number)?"":e.number.toString(16))}function Bt(e,_){if(e==_)return"green";if(e<_)return"yellow";if(e>_)return"blue"}function de(e){if(e.input){const _=e.input.length;return m(F,null,m("div",{class:"square"},"#"),m(I,{number:e.input[0],status:"empty",focused:_==0}),m(I,{number:e.input[1],status:"empty",focused:_==1}),m(I,{number:e.input[2],status:"empty",focused:_==2}),m(I,{number:e.input[3],status:"empty",focused:_==3}),m(I,{number:e.input[4],status:"empty",focused:_==4}),m(I,{number:e.input[5],status:"empty",focused:_==5}))}else{const _=e.guess||[],n=_.length>0?_.map((r,o)=>Bt(r,e.target[o])):["empty","empty","empty"];return m(F,null,m(he,{color:_}),m(I,{number:Math.floor(_[0]/16),status:n[0]}),m(I,{number:_[0]%16,status:n[0]}),m(I,{number:Math.floor(_[1]/16),status:n[1]}),m(I,{number:_[1]%16,status:n[1]}),m(I,{number:Math.floor(_[2]/16),status:n[2]}),m(I,{number:_[2]%16,status:n[2]}))}}function pe(e){return m("div",{class:"grid"},m("div",{class:"header h-red"},"Red"),m("div",{class:"header h-green"},"Green"),m("div",{class:"header h-blue"},"Blue"),Array(qt).fill().map((_,n)=>m(de,{guess:e.guesses[n],target:e.target,input:n==e.guesses.length?e.input:null})))}var ve={blue:String.fromCodePoint(128998),yellow:String.fromCodePoint(129e3),green:String.fromCodePoint(129001)};function Wt(e){const[_,n]=E(()=>!1);Ut(()=>{_&&setTimeout(()=>n(!1),3e3)},[_]);function r(){const o=e.result=="win"?`I solved it in ${e.guesses.length} guesses!`:"I failed :(",l=e.target,u=e.guesses.map(f=>f.map((c,p)=>ve[Bt(c,l[p])]).join("")).join(`
`),a=`Rougelike ${e.date} ${String.fromCodePoint(128997)}
${o}
${u}
https://asciisyaez.github.io/uma-tools-new2/rougelike`;navigator.clipboard.writeText(a),n(!0)}return _?m("span",null,"\u2713 Copied"):m("a",{href:"#",id:"copyresult",onClick:r},"Copy to clipboard")}function me(e){if(e.result=="win")return m("div",{class:"result correct"},m("div",null,"Correct!"),!e.isPractice&&m(Wt,{result:"win",guesses:e.guesses,target:e.target,date:e.date}),m("a",{href:"#",onClick:e.practiceCb},e.isPractice?"Go again":"Practice"));{const[_,n,r]=e.target,o="#"+(1<<24|_<<16|n<<8|r).toString(16).slice(1);return m("div",{class:"result failed"},m("div",null,":("),m("div",{id:"trueanswer"},m("span",null,"Answer: ",o)),!e.isPractice&&m(Wt,{result:"lose",guesses:e.guesses,target:e.target,date:e.date}),m("a",{href:"#",onClick:e.practiceCb},e.isPractice?"Go again":"Practice"))}}var Gt=new Date,ge=Gt.getTime()+Gt.getTimezoneOffset()*6e4,Y=new Date(ge+-6*36e5),ye=Y.toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-"),Q=new ie(Math.imul(Y.getFullYear(),524287)^Math.imul(Y.getMonth(),6700417)^Math.imul(Y.getDay(),131071));for(let e=0;e<1e3;++e)Q.step();function be([e,_,n],[r,o,l]){return Math.sqrt(Math.pow(e-r,2)+Math.pow(_-o,2)+Math.pow(n-l,2))}function zt(e,_,n,r){let o,l,u,a=!0,f=0;for(;a&&f<100;){o=(e.lo+Q.uniform(e.hi-e.lo))/360,l=(_.lo+Q.uniform(_.hi-_.lo))/100,u=(n.lo+Q.uniform(n.hi-n.lo))/100;let h=r,d=0;for(a=!1;h&&d<1;){if(be([o,l,u],fe(...h.head))<.3/(d+1)){a=!0;break}h=h.tail,++d}++f}const[c,p,i]=ce(o,l,u);return[Math.round(c),Math.round(p),Math.round(i)]}function ke(e){const _={lo:22,hi:32},n={lo:75,hi:100},r={lo:55,hi:100},[o,l]=E(()=>null),[u,a]=E(()=>zt(_,n,r,o)),[f,c]=E(()=>!1),[p,i]=E(()=>[]),[h,d]=E(()=>[]),[y,w]=E(()=>!1);Ut(()=>document.getElementById("outer").focus(),[u]);function k(g){if(h!=null){if(g.key=="Backspace")d(h.slice(0,-1));else if(/^[a-fA-F0-9]$/.test(g.key)&&!g.ctrlKey&&!g.altKey&&!g.metaKey){const x=parseInt(g.key,16);if(h.length==5){const N=[h[0]*16+h[1],h[2]*16+h[3],h[4]*16+x];i(p.concat([N])),d([]),N.every((A,T)=>A==u[T])?(c("win"),d(null)):p.length==qt-1&&(c("lose"),d(null))}else d(h.concat([x]))}}}function b(){const g={head:u,tail:o};l(g),a(zt(_,n,r,g)),c(!1),i([]),d([]),w(!0)}return m("div",{id:"outer",tabindex:"0",onKeyDown:k},m("div",{id:"wrapper"},m("div",{class:"rougeboy",style:`background:rgb(${u.join(",")})`}),m(pe,{guesses:p,target:u,input:h}),f&&m(me,{result:f,guesses:p,target:u,date:ye,isPractice:y,practiceCb:b})))}Zt(m(ke,null),document.getElementById("app"))})();
